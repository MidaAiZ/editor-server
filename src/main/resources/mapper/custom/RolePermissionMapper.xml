<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
 PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.mida.chromeext.dao.RolePermissionDAO">
    <!-- 根据roleId获取其关联的所有Permissions -->
    <select id="getPermissionsByRoleId" resultMap="com.mida.chromeext.mapper.PermissionMapper.BaseResultMap" parameterType="int">
        select p.*
        from permissions p, roles_permissions rp
        where p.pid = rp.permission_id and rp.role_id = #{role_id}
	</select>

    <!-- 根据permissionId获取其关联的所有Roles -->
    <select id="getRolesByPermissionId" resultMap="com.mida.chromeext.mapper.RoleMapper.BaseResultMap" parameterType="int">
        select r.*
        from roles r
        join roles_permissions rp
        on rp.permission_id = #{permission_id} and r.rid = rp.rold_id
	</select>
</mapper>